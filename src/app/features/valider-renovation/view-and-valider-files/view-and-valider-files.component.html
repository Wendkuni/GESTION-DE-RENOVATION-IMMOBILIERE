<div *ngIf="isLoadingResults" fxLayout="column" fxLayoutAlign="center center" class="user-spinner">   
    <mat-spinner color="primary"></mat-spinner>
  </div>

<div  class="container" >
    <div class="timeline">
        <div class="timeline-section" >
            <div class="timeline-date">
                Les Justificatif delivrés
                <!-- Date exécution : 10/10/2020 -->
                <!-- {{historique.dateAction | date:'dd/MM/yyyy HH:mm:ss'}} -->
            </div>
           <span *ngFor="let just of renovation.justificatif">
            <div class="row">
                <div class="col-sm-4">
                    <div class="timeline-box">
                        <div class="bg-primary p-1">
                            Appellation de la justificatif : {{just.appellation}}
                            <!-- {{historique?.etatInitial?.libelle || "CREATION"}} à {{historique.etatFinal.libelle}} -->
                        </div>
                        <div class="box-content">

                            <mat-list>
                                <div mat-subheader>Information du fichier</div>
                                <mat-list-item class="custom-list-item">
                                    <mat-icon mat-list-icon>today</mat-icon>
                                    <div mat-line> <strong>Type de fichier</strong> : {{just.dateCreaction}} </div>
                                </mat-list-item>
                                <mat-list-item class="custom-list-item">
                                    <mat-icon mat-list-icon>today</mat-icon>
                                    <div mat-line> <strong>Date de création</strong> : {{just.dateCreaction | date}} </div>
                                </mat-list-item>
                                <mat-list-item  align="end">
                                    <a mat-line mat-button href="{{URL}}{{just.urlFile.split('/')[2]}}" target="_blank">
                                        <mat-icon>visibility</mat-icon>
                                        visualiser
                                    </a>
                                </mat-list-item>
                                <mat-divider></mat-divider>
                                <mat-list-item class="champ" align="end" *ngIf="!just.valide">
                                    <mat-form-field mat-line appearance="outline">
                                        <mat-label>Remarque sur la justificatif</mat-label>
                                        <input matInput (keypress)="valide=true" [(ngModel)]="just.remarque" required>
                                    </mat-form-field>
                                </mat-list-item>
                                <mat-divider></mat-divider>

                                <mat-list-item align="end">
                                    <div mat-line>
                                        <button  (click)="valid(just)" [disabled]="just.valide" mat-raised-button color="primary" class="valider">Valider</button>
                                        <button  (click)="nonValid(just)" [disabled]="!just.valide" mat-raised-button color="warn">Refuser</button>
                                    </div>
                                </mat-list-item>
                                <mat-list-item  align="end">
                                    <button [disabled]="(!just.valide && (just.remarque==null || just.remarque=='' )) || valide ==null" (click)="validerModification(just)" mat-line mat-raised-button color="primary" >Valider Modification</button>
                                </mat-list-item>
                                <!-- <mat-list-item class="custom-list-item">
                                    <mat-icon mat-list-icon>account_circle</mat-icon>
                                    <div mat-line> <strong>Avez-vous obtenu vos financements ?</strong> : {{renovation.avoirFinancement}} </div>
                                </mat-list-item>
                                <mat-list-item class="custom-list-item">
                                    <mat-icon mat-list-icon>account_circle</mat-icon>
                                    <div mat-line><strong>Quel est votre budget travaux ?</strong> : {{renovation.budgetTravaux}} </div>
                                </mat-list-item>
                                <mat-list-item class="custom-list-item" >
                                    <mat-icon mat-list-icon>account_circle</mat-icon>
                                    <div mat-line> <strong>Faites-vous appel à un financement public ?</strong> : {{renovation.avoirFinancement}} </div>
                                </mat-list-item>
                                <mat-list-item class="custom-list-item" >
                                    <mat-icon mat-list-icon>account_circle</mat-icon>
                                    <div mat-line> <strong>Avez-vous effectuer un plan de financement ?</strong> : {{renovation.aEffectuerPlanFinance}} </div>
                                </mat-list-item> -->

                                <mat-divider></mat-divider>
                            </mat-list>

                        </div>

                    </div>
                </div>
            </div>
           </span>
        </div>
    </div>
</div>