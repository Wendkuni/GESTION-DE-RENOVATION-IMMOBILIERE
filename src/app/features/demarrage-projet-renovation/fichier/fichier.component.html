
  <h3 class="bg-primary p-1" fxLayoutAlign="center center">Gestionnaire des fichiers du projet de renovation</h3>


<mat-card>
  <button mat-button (click)="addDossier(null)"><mat-icon>create_new_folder</mat-icon>ajouter un dossier</button>
  <button mat-button (click)="addFichier(null)"><mat-icon>post_add</mat-icon>ajouter un fichier</button>
</mat-card>
<mat-card>
  <mat-card-header *ngIf="fileDossier.length<=0">
    <button  mwlDroppable mat-button (click)="retourRoot()">
      Racine
     </button>
  </mat-card-header>
  <mat-card-header *ngIf="fileDossier.length>0">
    <button mat-button mwlDroppable (drop)="onDrop($event, parent)" (click)="retourRoot()">
     Racine
    </button>
    <span *ngFor="let e of fileDossier">
      /
      <button mat-button mwlDroppable (drop)="onDrop($event, e)"  (click)="selecteRetour(e)">
        {{e.appellation}}
      </button>
    </span>
  </mat-card-header>
    <div fxLayout="column" fxLayout.gt-sm="row wrap">
      <div fxFlex="20" class="flex-p" *ngFor="let element of listDossier"> 

        <div class="custom-card" (drop)="onDrop($event, element)" mwlDroppable mwlDraggable dropData="dossier {{element.id}}">
              <mat-card-header class="p-1" fxLayoutAlign="space-between center">
                <mat-icon>folder</mat-icon>
                  <button mat-icon-button [matMenuTriggerFor]="menu"><mat-icon>more_vert</mat-icon></button>
              </mat-card-header>
              <mat-menu #menu="matMenu">
                  <a mat-line mat-button  (click)="addDossier(element)">
                    <mat-icon color="primary">edite</mat-icon>
                    <span>Modifier</span>
                  </a><br/>
                  <a mat-line mat-button *ngIf="haveGestionDossier==1" (click)="supprimerDossier(element.id)">
                    <mat-icon color="warn">delete</mat-icon>
                    <span>Supprimer</span>
                  </a><br/>
                  <a mat-line mat-button *ngIf="haveGestionUser==1" (click)="authorisationUser(element)">
                    <mat-icon>personne</mat-icon>
                    <span>Authorisation</span>
                  </a>
                </mat-menu>
                <mat-card-content fxLayoutAlign="center center" class="bg-primary p-1">
                  <button mat-button (click)="selecteDossier(element)">{{element.appellation}}</button>
                </mat-card-content>
        </div>
        
      </div>
      <div fxFlex="20" class="flex-p" *ngFor="let element of listFile"> 

        <div class="custom-card" (drop)="onDrop($event, element)" mwlDroppable mwlDraggable dropData="fichier {{element.id}}">
              <mat-card-header class="p-1" fxLayoutAlign="space-between center">
                <mat-icon>file_copy</mat-icon>
                  <button mat-icon-button [matMenuTriggerFor]="menu"><mat-icon>more_vert</mat-icon></button>
              </mat-card-header>
              <mat-menu #menu="matMenu">
                  <button mat-menu-item (click)="addFichier(element)">
                    <mat-icon>edite</mat-icon>
                    <span>Modifier</span>
                  </button>
                  <button mat-menu-item color="warn" (click)="supprimerFile(element.id)">
                    <mat-icon>delete</mat-icon>
                    <span>Supprimer</span>
                  </button>
                    <a mat-line mat-button href="{{URLFile}}{{element.link.split('/')[2]}}" target="_blank">
                      <mat-icon>visibility</mat-icon>
                      visualiser
                  </a>
                </mat-menu>
                <mat-card-content fxLayoutAlign="center center" class="p-1">
                  <a mat-line mat-button href="{{URLFile}}{{element.link.split('/')[2]}}" target="_blank">
                    <mat-icon>cloud_download</mat-icon>
                    {{element.nomFile}}
                </a>
                </mat-card-content>
        </div>
        
      </div>
    </div>
</mat-card>


<!--
<div mwlDraggable dropData="foo" dragActiveClass="drag-active" dragCursor="not-allowed">
  Mouse over me
</div>
<div
  mwlDroppable
  (drop)="onDrop($event)"
  dragOverClass="drop-over-active">
  <span [hidden]="droppedData">Drop here</span>
  <span [hidden]="!droppedData">Item dropped here with data: "{{ droppedData }}"!</span>
</div> -->
