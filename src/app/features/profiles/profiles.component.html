<div *ngIf="isLoadingResults" fxLayout="column" fxLayoutAlign="center center" class="user-spinner">   
  <mat-spinner color="primary"></mat-spinner>
</div>

<div fxLayout="row wrap">
  <div class="table-bouton-ajout">
      <mat-button-toggle-group appearance="legacy">
          <mat-button-toggle (click)="openDialog(null)" class="bg-primary">
              <mat-icon>add_circle_outline</mat-icon>
          </mat-button-toggle>
      </mat-button-toggle-group>
  </div>
      <div class="recherche">
          <mat-form-field class="recherche">
              <input matInput [(ngModel)]="rechercheGeneral" placeholder="Rechercher generale..." autocomplete="off" (keyup)="recherche()" [ngModelOptions]="{standalone: true}">
              <mat-icon matSuffix (click)="rechercheGeneral = ''; recherche()" class="sycad-element-clickable">clear</mat-icon>
          </mat-form-field>
      </div>
</div>

<div fxLayout="row wrap">
    <div fxFlex="100" class="flex-p"> 
        <div class="example-container mat-elevation-z8">
            <table mat-table [dataSource]="dataSources" matSort>
          
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> id </th>
                    <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                  </ng-container>
              <!-- Name Column -->
              <ng-container matColumnDef="libelle" sticky>
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Libelle </th>
                <td mat-cell *matCellDef="let element"> {{element.libelle}} </td>
              </ng-container>
          
              <!-- Position Column -->
              
          
              <!-- Weight Column -->
              <ng-container matColumnDef="roles">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Les Roles </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [matMenuTriggerFor]="menu">Voir +</button>
                    <mat-menu #menu="matMenu" >
                        <mat-list *ngFor="let r of element.roles">
                            <mat-list-item>
                                <div mat-line>{{r.libelle}}</div>
                            </mat-list-item>
                        </mat-list>
                    </mat-menu></td>
              </ng-container>
              
              <!-- Star Column -->
              <ng-container matColumnDef="action" stickyEnd>
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let element">
                    <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                        <mat-icon>more_vert</mat-icon>
                      </button>
                      <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="openDialog(element)">
                          <mat-icon>edite</mat-icon>
                          <span>Modifier</span>
                        </button>
                        <button mat-menu-item color="warn" (click)="supprimerRenovation(element.id)">
                          <mat-icon>delete</mat-icon>
                          <span>Supprimer</span>
                        </button>
                      </mat-menu>
                </td>
              </ng-container>
          
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
          </div>
    </div>

</div>